{"version":3,"sources":["Ambienx.min.js"],"names":["f","exports","module","define","Object","window","require","e","o","assign","1"],"mappings":"UAAUA,GAAG,GAAoBC,iBAAVA,SAAoC,oBAAAC,OAAaA,OAAOD,QAAQD,SAAmBG,GAASA,mBAATA,QAAqBA,OAAYA,IAAAA,UAAUH,OAWnIC,EAPPG,oBAJkKC,OAIlKD,OAOOH,oBAPPG,OAOOH,OAAAA,oBAAAA,KAAAA,KAAAA,MAAAA,QAPPG,MAAAA,WACSE,OAAAA,SAAAA,EAAAA,EAAAA,EAAAA,GAAAA,SADTF,EAAAA,EAAAA,GAAAA,IACPA,EAAAA,GAMcH,CAAAA,IAAAA,EAAAA,GAAAA,CAAAA,IAAAA,EANEK,mBAAAA,SAAAA,QAAAA,IAMFL,GAAAA,EAAAA,OAAAA,EAAAA,GAAAA,GAPUM,GAAAA,EAAAA,OAAAA,EAAAA,GAAAA,GAOVN,IAAAA,EAAAA,IAAAA,MAAAA,uBAPPG,EAAAA,KAAAA,MACPA,EAAAA,KADwBG,mBAOVN,EAAAA,IANEK,EAAAA,EAAAA,IAAAA,YAJpBA,EAG4BE,GAAjBJ,GAAAA,KAAAA,EAAAA,QACPA,SAMcH,GANPQ,IAASC,EAMFT,EAAAA,GAAAA,GAAAA,GAAAA,OANEK,EAAAA,GAAAA,IAMFL,EAAAA,EAAAA,QAAAA,EAAAA,EAAAA,EAAAA,GAAAA,OAAAA,EAAAA,GAAAA,QAAAA,IAAAA,IAAAA,EAAAA,mBAAAA,SAAAA,QAAAA,EAAAA,EAAAA,EAAAA,EAAAA,OAAAA,IAAAA,EAAAA,EAAAA,IAAAA,OAAAA,EANEK,EAMFL,GAAAA,SAAAA,EAAAA,EAAAA,w3IANEK","file":"Ambienx.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Ambienx = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\nif (typeof Object.assign != 'function') {\n    Object.assign = function (target, letArgs) {\n        // .length of function is 2\n        'use strict';\n\n        if (target == null) {\n            // TypeError if undefined or null\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n        var to = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var nextSource = arguments[index];\n            if (nextSource != null) {\n                // Skip over if undefined or null\n                for (var nextKey in nextSource) {\n                    // Avoid bugs when hasOwnProperty is shadowed\n                    if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                        to[nextKey] = nextSource[nextKey];\n                    }\n                }\n            }\n        }\n        return to;\n    };\n}\n// http://stackoverflow.com/questions/6784927/how-to-acces-javascript-object-letiables-in-prototype-function\n// https://seesparkbox.com/foundry/api_patterns_for_your_open_source_javascript_plugin\n// https://gomakethings.com/the-anatomy-of-a-vanilla-javascript-plugin/\n// https://github.com/HubSpot/odometer/blob/master/odometer.js\n// https://github.com/jquery-boilerplate/jquery-patterns\n;(function () {\n    // DEFINE THE NAME FOR THE PLUGIN AND CALL IT USING AN IIFE\n    var Ambienx = function () {\n        /*------------------------------------*\\\r\n          AMBIENX STATE\r\n        \\*------------------------------------*/\n        var ambienxState = {\n            isTriggered: false,\n            isMobile: false,\n            isPlaying: false,\n            isFading: false,\n            isFadingIn: false,\n            isFadingOut: false,\n            isPauseUserInitiated: true\n        };\n        // MOBILE DEVICE DETECTION\n        if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0, 4))) {\n            ambienxState.isMobile = true;\n        }\n        /*------------------------------------*\\\r\n          letIABLES...\r\n        \\*------------------------------------*/\n        var fadeInAudioInterval = void 0;\n        var fadeOutAudioInterval = void 0;\n        /*------------------------------------*\\\r\n          AMBIENX\r\n        \\*------------------------------------*/\n        function Ambienx(options) {\n            this.ambienxState = ambienxState;\n            /*------------------------------------*\\\r\n              PRIVATE letIABLES\r\n            \\*------------------------------------*/\n            // DEFAULT OPTIONS/SETTINGS\n            var defaultOptions = {\n                audioSrc: '',\n                audioLoop: false,\n                autoPlay: false,\n                enabledLoseFocus: false\n                // USER OPTIONS/SETTINGS\n            };var userOptions = options;\n            // MERGE OPTIONS/SETTINGS\n            var daOptions = Object.assign({}, defaultOptions, userOptions);\n            // AUDIO INSTANCE\n            var audio = void 0;\n            /*------------------------------------*\\\r\n              PUBLIC letIABLES\r\n            \\*------------------------------------*/\n            /*------------------------------------*\\\r\n              DO STUFF\r\n            \\*------------------------------------*/\n            // INSTANTIATE AUDIO INSTANCE\n            if (daOptions.audioSrc) {\n                audio = new Audio(daOptions.audioSrc);\n            }\n            if (daOptions.audioLoop) {\n                audio.loop = true;\n            } else {\n                audio.loop = false;\n            }\n            if (daOptions.autoPlay) {\n                audio.play();\n                ambienxState.isPauseUserInitiated = false;\n                ambienxState.isPlaying = true;\n            }\n            /*------------------------------------*\\\r\n              WINDOW BLUR/FOCUS EVENTS\r\n            \\*------------------------------------*/\n            if (daOptions.enabledLoseFocus) {\n                window.onblur = function () {\n                    audio.pause();\n                };\n                window.onfocus = function () {\n                    if (!ambienxState.isPauseUserInitiated) {\n                        if (ambienxState.isPlaying) {\n                            audio.play();\n                            ambienxState.isPauseUserInitiated = false;\n                            ambienxState.isPlaying = true;\n                        }\n                    }\n                };\n            }\n            /*------------------------------------*\\\r\n              PRIVATE MADE PUBLIC letIABLES\r\n            \\*------------------------------------*/\n            this.daOptions = daOptions;\n            this.audio = audio;\n        };\n        /*------------------------------------*\\\r\n          METHODS\r\n        \\*------------------------------------*/\n        Ambienx.prototype.clearIntervals = function () {\n            clearInterval(fadeInAudioInterval);\n            clearInterval(fadeOutAudioInterval);\n        };\n        Ambienx.prototype.playAudio = function () {\n            if (!ambienxState.isMobile) {\n                this.clearIntervals();\n                this.audio.volume = 0.5;\n                this.audio.play();\n                ambienxState.isTriggered = true;\n                ambienxState.isPauseUserInitiated = false;\n                ambienxState.isPlaying = true;\n            }\n        };\n        Ambienx.prototype.pauseAudio = function (options) {\n            this.clearIntervals();\n            this.audio.pause();\n            ambienxState.isPauseUserInitiated = true;\n            ambienxState.isPlaying = false;\n            if (options) {\n                if (options.stop) {\n                    this.audio.currentTime = 0;\n                }\n                if (options.isPauseUserInitiated === false) {\n                    ambienxState.isPauseUserInitiated = false;\n                }\n            }\n        };\n        // http://stackoverflow.com/questions/7451508/html5-audio-playback-with-fade-in-and-fade-out\n        Ambienx.prototype.fadeInAudio = function (options) {\n            var self = this;\n            // DEFAULT FADE IN VOLUME\n            var setVolume = 0.5;\n            // IF USER HAS SET A TARGET VOLUME, THEN USE THAT INSTEAD OF THE DEFAULT\n            if (options) {\n                if (options.setVolume) {\n                    setVolume = options.setVolume;\n                }\n            }\n            // IF AUDIO ISN'T FADING\n            if (!ambienxState.isFadingIn) {\n                // NOTIFY THAT IT'S NOT FADING OUT ANYMORE\n                ambienxState.isFadingOut = false;\n                // NOTIFY THAT IT'S FADING IN\n                ambienxState.isFadingIn = true;\n                // GET THE AUDIO READY AT 0\n                self.playAudio();\n                self.audio.volume = 0;\n                // FADE IN AUDIO\n                fadeInAudioInterval = setInterval(function () {\n                    // FADE IN AUDIO IF VOLUME IS LESS THAN THE TARGET VOLUME\n                    if (self.audio.volume.toFixed(1) < setVolume) {\n                        self.audio.volume += 0.1;\n                    }\n                    // WHEN WE REACH THE TARGET VOLUME\n                    if (parseFloat(self.audio.volume.toFixed(1)) === setVolume) {\n                        ambienxState.isFadingIn = false;\n                        // IF THERE'S A CALLBACK, EXECUTE IT\n                        if (options) {\n                            if (options.callback) {\n                                options.callback();\n                            }\n                        }\n                        clearInterval(fadeInAudioInterval);\n                    }\n                }, 200);\n            }\n        }; // END `fadeInAudio` PROTOTYPE\n        Ambienx.prototype.fadeOutAudio = function (options) {\n            var self = this;\n            this.clearIntervals();\n            if (options) {\n                if (options.isPauseUserInitiated) {\n                    ambienxState.isPauseUserInitiated = true;\n                }\n            }\n            ambienxState.isPlaying = false;\n            // DEFAULT FADE OUT VOLUME\n            var setVolume = 0;\n            // IF USER HAS SET A TARGET VOLUME, THEN USE THAT INSTEAD OF THE DEFAULT\n            if (options) {\n                if (options.setVolume) {\n                    setVolume = options.setVolume;\n                }\n            }\n            // IF AUDIO IS FADING\n            if (!ambienxState.isFadingOut) {\n                // NOTIFY THAT IT'S NOT FADING IN ANYMORE\n                ambienxState.isFadingIn = false;\n                // NOTIFY THAT IT'S FADING OUT\n                ambienxState.isFadingOut = true;\n                fadeOutAudioInterval = setInterval(function () {\n                    // FADE OUT AUDIO IF VOLUME IS GREATER THAN THE TARGET VOLUME\n                    if (self.audio.volume.toFixed(1) > setVolume) {\n                        self.audio.volume -= 0.1;\n                    }\n                    // WHEN WE REACH THE TARGET VOLUME\n                    if (parseFloat(self.audio.volume.toFixed(1)) === setVolume) {\n                        ambienxState.isFadingOut = false;\n                        if (setVolume === 0) {\n                            self.pauseAudio();\n                            // IF THERE'S A CALLBACK, EXECUTE IT\n                            if (options) {\n                                if (options.callback) {\n                                    options.callback();\n                                }\n                            }\n                            clearInterval(fadeOutAudioInterval);\n                        }\n                    }\n                }, 200);\n            }\n        }; // END `fadeOutAudio` PROTOTYPE\n        Ambienx.prototype.toggleFadeAudio = function (options) {\n            if (ambienxState.isPlaying) {\n                var fadeOutVolume = void 0;\n                if (options) {\n                    if (options.fadeOutVolume) {\n                        fadeOutVolume = options.fadeOutVolume;\n                    }\n                } else {\n                    fadeOutVolume = 0;\n                }\n                this.fadeOutAudio(options);\n            } else {\n                var fadeInVolume = void 0;\n                if (options) {\n                    if (options.fadeInVolume) {\n                        fadeInVolume = options.fadeInVolume;\n                    }\n                } else {\n                    fadeInVolume = 0.5;\n                }\n                this.fadeInAudio(options);\n            }\n        };\n        // RETURN Ambienx SO THAT IT CAN BE INSTANTIATED WITH TNE `new` KEYWORD\n        return Ambienx;\n    }();\n    /*------------------------------------*\\\r\n      EXPORT OPTIONS\r\n    \\*------------------------------------*/\n    module.exports = Ambienx;\n\n    // WHAT IS THIS FOR?\n}).call(undefined);\n\n},{}]},{},[1])(1)\n});"]}